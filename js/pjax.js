class Pjax{constructor(t,e){return this.container=t,this.option=e,this.contain=document.getElementById(t),this.links=document.getElementsByTagName("a"),this.lastTrigger="",this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopstate=this.handlePopstate.bind(this),this.attachEventListeners()}attachEventListeners(){Array.from(this.links).forEach((t=>{window.location.host===t.host&&"_blank"!==t.target&&(t.onclick=this.handleLinkClick)})),window.onpopstate=this.handlePopstate}handleLinkClick(t){console.log(t.target),t.preventDefault();const e=t.target.href;this.lastTrigger!==e&&(this.lastTrigger=e,this.loadPage(e),history.pushState(null,"",e))}handlePopstate(t){const e=location.href;this.lastTrigger=e,this.loadPage(e)}loadPage(url){this.option?.before&&this.option.before();const xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.onload=()=>{if(200===xhr.status||304===xhr.status){const html=xhr.responseText,newContainer=(new DOMParser).parseFromString(html,"text/html"),newContent=newContainer.getElementById(this.container);this.contain.innerHTML=newContent.innerHTML,document.title=newContainer.querySelector("title").innerText;const script=newContent.querySelector("script");script&&eval(script.innerText),history.replaceState(null,"",url),this.option?.complate&&this.option.complate(),this.attachEventListeners()}else window.location.replace("/404.html")},xhr.send()}}