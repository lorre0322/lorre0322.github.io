var updateQueryString=require("./util/update-query-string");module.exports=function(e,t,u){var n,r=(t=t||{}).requestOptions||{},s=(r.requestMethod||"GET").toUpperCase(),a=r.requestParams||null,o=r.formData||null,i=null,l=new XMLHttpRequest,p=t.timeout||0;if(l.onreadystatechange=function(){4===l.readyState&&(200===l.status?u(l.responseText,l,e,t):0!==l.status&&u(null,l,e,t))},l.onerror=function(n){u(null,l,e,t)},l.ontimeout=function(){u(null,l,e,t)},a&&a.length)switch(n=a.map((function(e){return e.name+"="+e.value})).join("&"),s){case"GET":e=e.split("?")[0],e+="?"+n;break;case"POST":i=n}else o&&(i=o);return t.cacheBust&&(e=updateQueryString(e,"t",Date.now())),l.open(s,e,!0),l.timeout=p,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("X-PJAX","true"),l.setRequestHeader("X-PJAX-Selectors",JSON.stringify(t.selectors)),i&&"POST"===s&&!o&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(i),l};