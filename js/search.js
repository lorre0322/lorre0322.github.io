(async()=>{const e=document.currentScript.getAttribute("path"),t=_$("s-txt"),o=_$("s-wrap"),i=await fetch(e),n=(await i.json()).map((e=>(e.content=function(e){const t=String.fromCharCode,o=e.length,i=32768;if(!e)return"";var n,a,s,r,c,p,d,l=[],h=4,u=4,f=3,v="",m=[],w={val:e.charCodeAt(0),position:i,index:1};for(n=0;n<3;n+=1)l[n]=n;for(s=0,c=Math.pow(2,2),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;switch(next=s){case 0:for(s=0,c=Math.pow(2,8),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;d=t(s);break;case 1:for(s=0,c=Math.pow(2,16),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;d=t(s);break;case 2:return""}for(l[3]=d,a=d,m.push(d);;){if(w.index>o)return"";for(s=0,c=Math.pow(2,f),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;switch(d=s){case 0:for(s=0,c=Math.pow(2,8),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;l[u++]=t(s),d=u-1,h--;break;case 1:for(s=0,c=Math.pow(2,16),p=1;p!=c;)r=w.val&w.position,w.position>>=1,0==w.position&&(w.position=i,w.val=e.charCodeAt(w.index++)),s|=(r>0?1:0)*p,p<<=1;l[u++]=t(s),d=u-1,h--;break;case 2:return m.join("")}if(0==h&&(h=Math.pow(2,f),f++),l[d])v=l[d];else{if(d!==u)return null;v=a+a.charAt(0)}m.push(v),l[u++]=a+v.charAt(0),a=v,0==--h&&(h=Math.pow(2,f),f++)}}(e.content),e)));t.addEventListener("input",(()=>{const e=t.value.trim().split(/[\s\-]+/);o.innerHTML="";const i=document.createDocumentFragment();n.forEach((t=>{var o=t.title.trim(),n=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=t.url.startsWith("/")?t.url:"/"+t.url,s=-1,r=-1;e[0],n&&e[0]&&e.forEach(((e,t)=>{if(s=o.indexOf(e),r=n.indexOf(e),!(s<0&&r<0)){var c=new RegExp(`(${e})`,"gi"),p='<span class="s-key">$1</span>';o=o.replace(c,p);var d=r-10,l=r+50,h=n.substring(d,l).replace(c,p);const t=document.createElement("a"),s=document.createElement("div"),u=document.createElement("span"),f=document.createElement("span");t.href=a,t.addEventListener("click",(()=>{document.body.classList.remove("search")})),t.className="s-item",u.className="s-res-tit",f.className="s-res-con",u.innerHTML=o,f.innerHTML=h+"...",s.appendChild(u),s.appendChild(f),t.appendChild(s),i.appendChild(t)}}))})),o.appendChild(i);var a=0;window.addEventListener("keydown",(e=>{a>o.childNodes.length&&(a=0),!e.altKey||"KeyJ"!==e.code&&74!==e.keyCode||(a<o.childNodes.length&&a++,o.childNodes[a-1].focus()),!e.altKey||"KeyK"!==e.code&&75!==e.keyCode||(a>1&&a--,o.childNodes[a-1].focus()),"Escape"!==e.code&&27!==e.keyCode||t.focus()}))}))})();