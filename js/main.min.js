function toggleSearch(){const t=_$("search"),e=()=>{HC(document.body,"search")?document.body.classList.remove("search"):(document.body.classList.add("search"),setTimeout(()=>{_$("s-txt").focus()},300))};t.onclick=(()=>{e()}),window.addEventListener("keydown",t=>{!t.ctrlKey||"Slash"!==t.code&&191!==t.keyCode||e()})}function toggleTheme(){_$("sw-th").onclick=(()=>{const t=localStorage.getItem("theme");t?dark():(light(),_$("sw-th").innerText="关灯")})}const _$=t=>document.getElementById(t),HC=(t,e)=>t.className.indexOf(e)>-1,root=document.documentElement,light=()=>{root.classList.add("light"),localStorage.setItem("theme","light")},dark=()=>{root.classList.remove("light"),localStorage.removeItem("theme"),_$("sw-th").innerText="开灯"},toggleMusic=()=>{const t=_$("sw-au"),e=_$("ch-au"),o=_$("bg-au");o.src=play_list[0];var l=0;t.onclick=(()=>{HC(o,"play")?(o.classList.remove("play"),t.innerText="播放",o.pause()):(o.classList.add("play"),t.innerText="暂停",o.play())}),o.addEventListener("ended",()=>{o.loop||(l===play_list.length-1?l=0:l++,o.src=play_list[l],o.play())}),e.onclick=(()=>{o.loop=!o.loop}),e.ontouchstart=(t=>{if(HC(_$("bg-au"),"play")){const c=t.targetTouches[0].clientX;e.ontouchend=(t=>{const e=t.changedTouches[0].clientX,s=e-c;s>0&&l<=play_list.length&&(l++,l===play_list.length&&(l=0),o.src=play_list[l]),s<0&&l>=0&&(0===l&&(l=play_list.length),l--,o.src=play_list[l]),o.play()})}})},toTop=()=>{_$("load").onclick=(()=>{window.scrollTo(0,0)})};(()=>{const t=localStorage.getItem("theme");"loading"===document.readyState&&t&&light(),document.addEventListener("DOMContentLoaded",function(){t&&(_$("sw-th").innerText="关灯"),toggleTheme(),toggleSearch(),toggleMusic(),toTop()})})();